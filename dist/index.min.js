!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dtnClient=e():t.dtnClient=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){var r=n(1);t.exports={GamClient:r}},function(t,e){var n=document.createElement("div");function r(t){(t=t||{}).addScript=void 0===t.addScript||t.addScript,t.loadEvent=void 0!==t.loadEvent?t.loadEvent:"sv-adloaded",t.attrs=void 0!==t.attrs?t.attrs:{},t.attrs.adcomplete=void 0!==t.attrs.complete?t.attrs.complete:"data-sv-adcomplete",t.attrs.adunit=void 0!==t.attrs.adunit?t.attrs.adunit:"data-sv-adunit",t.attrs.adrecid=void 0!==t.attrs.adrecid?t.attrs.adrecid:"data-sv-adrecid",t.attrs.adsize=void 0!==t.attrs.adsize?t.attrs.adsize:"data-sv-adsize",t.attrs.adstyle=void 0!==t.attrs.adstyle?t.attrs.adstyle:"data-sv-adstyle",t.attrs.adclick=void 0!==t.attrs.adclick?t.attrs.adclick:"data-sv-adclick",function(t){!0===t&&(e=document,r="script",a=e.getElementsByTagName(r)[0],(i=e.createElement(r)).async=!0,i.src="//www.googletagservices.com/tag/js/gpt.js",a.parentNode.insertBefore(i,a));var e,r,a,i;window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((function(){window.googletag.pubads().enableSingleRequest(),window.googletag.enableServices(),window.googletag.pubads().addEventListener("slotRenderEnded",(function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("slotRenderEnded-"+t.slot.getSlotElementId(),!0,!0,{}),n.dispatchEvent(e)}))}))}(t.addScript),this._c=Math.floor(1e5*Math.random()),this._getAdTile=0,this._slotId=0,this._args=t,this._attrs=t.attrs}function a(t){var e=document.createElement("img");e.src=t,e.style.display="none",document.querySelector("body").appendChild(e)}function i(){return{pathname:document.location.pathname,absolute_pathname:document.location.origin+document.location.pathname,href:document.location.href}}function o(t,e){for(var n in e)t[n]=e[n]}r.prototype.renderAds=function(){var t=this,e=document.querySelectorAll("["+t._attrs.adunit+"]:not(["+t._attrs.adcomplete+"])");(e=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}(e)).forEach((function(e,r){e.setAttribute(t._attrs.adcomplete,""),""===e.id&&(e.id="sv-ad-"+t._slotId++);var o={id:e.id,adunit:e.getAttribute(t._attrs.adunit),adrecid:e.getAttribute(t._attrs.adrecid),adsize:e.getAttribute(t._attrs.adsize),adstyle:e.getAttribute(t._attrs.adstyle)||"iframe",template:e.innerHTML};if("iframe"===o.adstyle){if(null===o.adsize)return console.error("Adunit '"+o.adunit+"' requires "+t._attrs.adsize+".");var d=o.adsize.split("x").map((function(t){return Number(t)}));window.googletag.cmd.push((function(){var r=window.googletag.defineSlot(o.adunit,d,o.id);if(null!==r){r.addService(window.googletag.pubads());var a=i();for(var s in a)r.setTargeting(s,a[s]);var l=function(r){t._dispatchEvent(e,{adSlot:o}),n.removeEventListener(u,l,!1)},u="slotRenderEnded-"+o.id;n.addEventListener(u,l,!1),window.googletag.display(o.id)}}))}else if("html"===o.adstyle){if(null===o.adsize)return console.error("Adunit '"+o.adunit+"' requires "+t._attrs.adsize+".");t.getAd({adunit:o.adunit,size:o.adsize},(function(n,r){if(n)return console.error(n);e.innerHTML=r,t._dispatchEvent(e,{adSlot:o,data:r})}))}else if("template"===o.adstyle){if(null===o.adsize)return console.error("Adunit '"+o.adunit+"' requires "+t._attrs.adsize+".");t.getAd({adunit:o.adunit,size:o.adsize},(function(n,r){if(n)return console.error(n);if(0!==r.length){var i=JSON.parse(r);if(void 0===i.impressionUrl)return console.error("Template adunit '"+o.adunit+"' requires an 'impressionUrl' in it's creative.");a(i.impressionUrl);var d=o.template;for(var s in i)d=d.replace(new RegExp("{{"+s+"}}","g"),i[s]);d=d.replace(/<\/?template>/g,""),e.innerHTML=d,t._dispatchEvent(e,{adSlot:o,data:i})}}))}else if("recid"===o.adstyle){if(null===o.adrecid)return console.error("Adunit '"+o.adunit+"' requires "+t._attrs.adrecid+".");t.getAd({adunit:o.adunit,size:"1x1",targeting:{recid:o.adrecid},c:Date.now()+""+Math.floor(1e5*Math.random())},(function(n,r){if(n)return console.error(n);if(0!==r.length){for(var i=JSON.parse(r),d=["recid","impressionUrl","clickUrl"],s=0;s<d.length;s++){var l=d[s];if(void 0===i[l]||"string"!=typeof i[l]||0===i[l].length)return console.error("Featured listing ad templates require a valid '"+l+"'")}a(i.impressionUrl);var u=function(n){for(var r,o=n.target,d=!1;o!==e;){if(!0===o.hasAttribute(t._attrs.adclick)){d=!0;break}o=o.parentElement}!1!==d&&(r=i.clickUrl,navigator.sendBeacon?function(t){navigator.sendBeacon(t)}(r):a(r),e.removeEventListener("click",u,!0))};e.addEventListener("click",u,!0),t._dispatchEvent(e,{adSlot:o,data:i})}}))}}))},r.prototype.getAd=function(t,e){if(void 0===(t=t||{}).adunit||void 0===t.size)return e(new Error("getAd requires args.adunit and args.size"));var n=t.c||this._c,r={};void 0!==t.targeting&&o(r,t.targeting),o(r,i());var a=[];for(var d in r)a.push(encodeURIComponent(d)+"="+encodeURIComponent(r[d]));var s=a.join("&"),l=new XMLHttpRequest,u="https://pubads.g.doubleclick.net/gampad/adx?iu="+encodeURIComponent(t.adunit)+"&sz="+encodeURIComponent(t.size)+"&c="+n+"&tile="+this._getAdTile+++"&t="+encodeURIComponent(s);l.open("GET",u),l.onload=function(){return 200===l.status?e(null,l.responseText):e(new Error("GAM returned '"+l.status+"' status code."))},l.send()},r.prototype._dispatchEvent=function(t,e){var n=document.createEvent("CustomEvent");n.initCustomEvent(this._args.loadEvent,!0,!0,e),t.dispatchEvent(n)},t.exports=r}])}));